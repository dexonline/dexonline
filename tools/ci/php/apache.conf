# Apache vhost for CI (GitHub Actions and local Docker).
#
# The Selenium test suite has the base URL hardcoded as:
#   http://localhost/dexonline/www/
#
# The Alias directive maps that URL path to the actual web root (www/)
# inside the repo, which is volume-mounted at /var/www/html.

<VirtualHost *:80>
        ServerName localhost

        ServerAdmin ci@localhost
        DocumentRoot /var/www/html/www

        LogLevel warn
        ErrorLog  /var/log/dex-error.log
        CustomLog /var/log/dex-access.log combined

        # Serve the repo's www/ directory under /dexonline/www/
        # This matches the hardcoded base URL in dexonline-test-suite.side.
        Alias /dexonline/www /var/www/html/www

        <Directory /var/www/html/www>
            Allow from all
            AllowOverride all
            Require all granted
        </Directory>
</VirtualHost>

# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
